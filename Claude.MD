# Claude.MD - Dokumentace projektu

## ğŸ“‹ Popis projektu
Full-stack TODO aplikace postavenÃ¡ na Node.js, Express.js, PostgreSQL a Vanilla JavaScript. Projekt demonstruje modernÃ­ web development s Docker containerizacÃ­ a ÄistÃ½m, responzivnÃ­m UI designem.

## ğŸ›  Tech Stack
- **Backend:** Node.js + Express.js
- **Database:** PostgreSQL 16 (Docker container)
- **Frontend:** Vanilla JavaScript + Tailwind CSS (CDN)
- **Tools:** Docker, Docker Compose, GitHub CLI
- **Package Manager:** npm

## ğŸ— Architektura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Browser (Client)                â”‚
â”‚   HTML + Tailwind CSS + Vanilla JS     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ HTTP/REST API
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Express Server (Backend)          â”‚  Port 3000
â”‚   - REST API Endpoints                  â”‚
â”‚   - Static File Serving                 â”‚
â”‚   - CORS Middleware                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ TCP/IP (pg driver)
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       PostgreSQL Database               â”‚  Port 5432
â”‚   - todos table                         â”‚  (Docker)
â”‚   - Auto migrations on startup          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Jak spustit

### 1. SpuÅ¡tÄ›nÃ­ PostgreSQL
```bash
docker compose up -d
```

### 2. Instalace zÃ¡vislostÃ­
```bash
npm install
```

### 3. SpuÅ¡tÄ›nÃ­ serveru
```bash
npm run dev
```

## ğŸ“¡ API Endpointy

### ZÃ¡kladnÃ­ endpointy
| Endpoint | Metoda | Popis |
|----------|--------|-------|
| `/` | GET | UvÃ­tacÃ­ zprÃ¡va a seznam endpointÅ¯ |
| `/health` | GET | Health check serveru |
| `/api/test` | GET | Test DB pÅ™ipojenÃ­ |

### TODO API
| Endpoint | Metoda | Popis | Request Body | Response |
|----------|--------|-------|--------------|----------|
| `/api/todos` | GET | ZÃ­skat vÅ¡echny todos | - | `{success: boolean, data: Todo[]}` |
| `/api/todos` | POST | VytvoÅ™it novÃ© todo | `{title: string}` | `{success: boolean, data: Todo}` |
| `/api/todos/:id` | PATCH | PÅ™epnout completed status | - | `{success: boolean, data: Todo}` |
| `/api/todos/:id` | DELETE | Smazat todo | - | `{success: boolean, message: string}` |

**Todo objekt:**
```json
{
  "id": 1,
  "title": "VyzkouÅ¡et TODO aplikaci",
  "completed": false,
  "created_at": "2025-10-06T12:00:00.000Z"
}
```

**Error Response:**
```json
{
  "success": false,
  "message": "Error message",
  "error": "Detailed error (optional)"
}
```

## ğŸ”§ PÅ™Ã­kazy

### Docker
```bash
docker compose up -d          # Spustit services
docker compose down           # Zastavit services
docker compose logs postgres  # Zobrazit logy
docker ps                     # Seznam bÄ›Å¾Ã­cÃ­ch kontejnerÅ¯
```

### GitHub CLI
```bash
gh repo view --web           # OtevÅ™Ã­t repo v browseru
gh repo list                 # Seznam repozitÃ¡Å™Å¯
gh auth status               # Status autentizace
```

## ğŸ› Troubleshooting

### PostgreSQL se nepÅ™ipojÃ­
```bash
docker compose logs postgres
docker compose restart postgres
```

### Port 5432 je obsazenÃ½
```bash
sudo lsof -i :5432
docker compose down
```

### Node.js dependency chyby
```bash
rm -rf node_modules package-lock.json
npm install
```

## ğŸ“ Environment Variables

VytvoÅ™te `.env` soubor podle `.env.example`:
```env
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=testdb
PORT=3000
```

## ğŸ—„ï¸ DatabÃ¡ze

### Struktura tabulky `todos`
```sql
CREATE TABLE todos (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    completed BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### AutomatickÃ© migrace
SQL migrace v sloÅ¾ce `migrations/` se automaticky spustÃ­ pÅ™i prvnÃ­m startu PostgreSQL containeru dÃ­ky volume mappingu v `docker-compose.yml`.

## ğŸ¨ Frontend

### Struktura
```
public/
â”œâ”€â”€ index.html  - HTML struktura s Tailwind CSS
â””â”€â”€ app.js      - Vanilla JavaScript logika
```

### Features
- âœ… ResponzivnÃ­ design (mobile-first)
- âœ… Real-time aktualizace UI
- âœ… Loading states
- âœ… Error handling s automatickÃ½m skrytÃ­m
- âœ… PrÃ¡zdnÃ½ stÃ¡t kdyÅ¾ nejsou Å¾Ã¡dnÃ© todos
- âœ… Statistiky (celkem/hotovo/zbÃ½vÃ¡)
- âœ… Animace pÅ™i pÅ™idÃ¡nÃ­ todo
- âœ… PotvrzenÃ­ pÅ™ed smazÃ¡nÃ­m
